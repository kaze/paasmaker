{% extends "../layout/main.html" %}

{% block pretitle %}
	{% module Template("include/router_stats.html", router_stats=router_stats, router_stats_name=router_stats_name, router_stats_input_id=router_stats_input_id) %}
{% end %}

{% block pagetitle %}
	Application {{ application.name }}
{% end %}

{% block body %}
	<div class="btn-group btn-group-header">
		<a class="btn" href="/workspace/{{ application.workspace.id }}/applications">Back to {{ application.workspace.name }}</a>
		<a class="btn" href="/application/{{ application.id }}/newversion">Create new version</a>
		<a class="btn" href="/job/list/application/{{ application.id }}">Jobs</a>
	</div>

	<table class="table table-striped table-bordered">
		{% module Template("application/version_row_header.html") %}
		{% if current_version %}
			{# Show the current version first - always - then repeat the header and show the rest. #}
			{% module Template("application/version_row.html", version=current_version, nice_state=nice_state, constants=constants) %}
			{% module Template("application/version_row_header.html") %}
		{% end %}
		{% for version in versions %}
			{% module Template("application/version_row.html", version=version, nice_state=nice_state, constants=constants) %}
		{% end %}
	</table>

	{% module Template("include/pagination.html", page_data=versions_pagination) %}
{% end %}