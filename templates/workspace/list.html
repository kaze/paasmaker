{% extends "../layout/main.html" %}

{% block pagetitle %}
	Workspace List
{% end %}

{% block body %}
	<div class="btn-group btn-group-header">
		{% if has_permission(PERMISSION.WORKSPACE_EDIT) %}
			<a class="btn" href="/workspace/create">Create Workspace</a>
		{% end %}
	</div>

	<table class="table table-striped table-bordered">
		<tr>
			<th>Workspace</th>
			<th>Applications</th>
			<th>Jobs</th>
			<th>Services</th>
		</tr>
		{% for workspace in workspaces %}
			<tr>
				<td>
					{% if has_permission(PERMISSION.WORKSPACE_EDIT) %}<a href="/workspace/{{ workspace.id }}">{% end %}
						{{ workspace.name }}
					{% if has_permission(PERMISSION.WORKSPACE_EDIT) %}</a>{% end %}
				</td>
				<td>
					<a href="/workspace/{{ workspace.id }}/applications">{{ len(workspace.applications) }} applications</a>
				</td>
				<td>
					<a href="/job/list/workspace/{{ workspace.id }}">Jobs</a>
				</td>
				<td>
					{% if has_permission(PERMISSION.WORKSPACE_SERVICE_DETAIL) %}<a href="/workspace/{{ workspace.id }}/services">{% end %}
						{{ len(workspace.services) }} services
					{% if has_permission(PERMISSION.WORKSPACE_SERVICE_DETAIL) %}</a>{% end %}
				</td>
			</tr>
		{% end %}
	</table>

	{% module Template("include/pagination.html", page_data=workspaces_pagination) %}
{% end %}
