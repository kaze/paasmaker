{% extends "../layout/main.html" %}

{% block pretitle %}
	<div class="router-stats well well-small" data-name="application" data-inputid="{{ application.id }}">Loading...</div>
{% end %}

{% block pagetitle %}
	Application {{ application.name }}
{% end %}

{% block body %}
	<div class="btn-toolbar">
		<div class="btn-group btn-group-header">
			<a class="btn" href="/workspace/{{ application.workspace.id }}/applications"><i class="icon-backward"></i> Back to {{ application.workspace.name }}</a>
		</div>
		<div class="btn-group btn-group-header">
			<a class="btn" href="/application/{{ application.id }}/newversion"><i class="icon-plus"></i> Create new version</a>
		</div>
		<div class="btn-group btn-group-header">
			<a class="btn" href="/job/list/application/{{ application.id }}">All Jobs</a>
			<a class="btn" href="/job/list/application/{{ application.id }}?sub=cron">Cron Jobs</a>
		</div>
	</div>

	<table class="table table-striped table-bordered">
		{% module Template("application/version_row_header.html") %}
		{% if current_version %}
			{# Show the current version first - always - then repeat the header and show the rest. #}
			{% module Template("application/version_row.html", version=current_version, nice_state=nice_state, constants=constants) %}
			{% module Template("application/version_row_header.html") %}
		{% end %}
		{% for version in versions %}
			{% module Template("application/version_row.html", version=version, nice_state=nice_state, constants=constants) %}
		{% end %}
	</table>

	{% module Template("include/pagination.html", page_data=versions_pagination) %}
{% end %}