{% extends "../layout/main.html" %}

{% block pretitle %}
	{% module Template("include/router_stats.html", router_stats=router_stats, router_stats_display=router_stats_display) %}
{% end %}

{% block pagetitle %}
	Version {{ version.version }} of {{ version.application.name }}
{% end %}

{% block body %}
	<div class="btn-group btn-group-header">
		<a class="btn" href="/application/{{ version.application.id }}">Back to {{ version.application.name }}</a>
		<a class="btn" href="/job/list/version/{{ version.id }}">All Jobs</a>
		<a class="btn" href="/job/list/version/{{ version.id }}?sub=cron">Cron Jobs</a>
	</div>

	<h2>Summary</h2>

	<table class="table table-striped table-bordered">
		<tr>
			<th>Current:</th>
			<td>{{ version.is_current }}</td>
		</tr>
	</table>

	<h2>Instance Types</h2>
	<table class="table table-striped table-bordered">
		<tr>
			<th>Name</th>
			<th>Runtime</th>
			<th>Quantity</th>
			<th>Exclusive</th>
			<th>Standalone</th>
			<th>Hostnames</th>
		</tr>
		{% for instance_type in version.instance_types %}
			<tr>
				<td>
					{{ instance_type.name }}
				</td>
				<td>
					{{ instance_type.runtime_name }}
				</td>
				<td>
					{{ instance_type.quantity }}
				</td>
				<td>
					{{ instance_type.exclusive }}
				</td>
				<td>
					{{ instance_type.standalone }}
				</td>
				<td>
					{% if not instance_type.standalone %}
						{% for hostname in instance_type.hostnames %}
							{% if version.is_current %}
								<a href="http://{{ hostname.hostname }}/" target="_blank">
							{% end %}
								{{ hostname.hostname }}
							{% if version.is_current %}
								</a>
							{% end %}
							<br />
						{% end %}
						<a href="http://{{ instance_type.version_hostname(configuration) }}" target="_blank">
							{{ instance_type.version_hostname(configuration) }}
						</a>
					{% else %}
						Standalone instance
					{% end %}
				</td>
			</tr>
		{% end %}
	</table>

	<h2>Services</h2>
	<table class="table table-striped table-bordered">
		<tr>
			<th>Name</th>
			<th>Provider</th>
			<th>State</th>
		</tr>
		{% for service in version.services %}
			<tr>
				<td>
					{{ service.name }}
				</td>
				<td>
					{{ service.provider }}
				</td>
				<td>
					{{ service.state }}
				</td>
			</tr>
		{% end %}
	</table>
{% end %}
